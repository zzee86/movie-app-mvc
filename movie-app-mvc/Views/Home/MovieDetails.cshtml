@model MovieInfo.Result

@{
    ViewData["Title"] = "Details Page";
}


<head>
    <link rel="stylesheet" href="~/css/site.css" />
</head>

@Html.Partial("_NavBar")


<div class="hero-section">

    <div class="detail-card">
            <div class="detail-card-image">
                <img src="@Model.poster_path_url" alt="Movie Poster" />
            </div>
    </div>


    <div class="background-image-holder">
        <img src="@Model.backdrop_path_url" class="media_background_image" alt="background-image" />
    </div>

</div>

<div class="moviesDetailsContainer">


    <h1>@Model.title</h1>
    <h1>@Model.overview</h1>


    <h1>Show ID: @ViewBag.movieID</h1>
    <h1>Show Key: @ViewBag.MovieKey</h1>

    @if (@ViewBag.Media_Key == "tv")
    {
        <h1>Seasons: @ViewBag.SeasonNumber</h1>

        <h1>Current Season Episode Count: @ViewBag.SeasonEpisodeCount</h1>

        <h1>Total Episode Count: @ViewBag.episodeTotalCount</h1>

        <h1>Average Runtime: @ViewBag.EpisodeRuntime minutes</h1>
    }



    @*<form method="post" action="@Url.Action("movieTrailer", "Home", new { id = Model.id })">
            <button id="show-video-button" type="submit">Show Video</button>
        </form>*@






    <button id="show-video-button">Show Video</button>

    <!-- Overlay video element -->
    <div id="overlay-video">
        <div class="close-header">
            <button id="close-button">Close</button>
        </div>
        <div id="video-container">
            <iframe id="video-iframe" width="100%" height="100%" frameborder="0" allowfullscreen autoplay></iframe>
        </div>
    </div>


</div>



<script>
    // Get the elements
    const showVideoButton = document.getElementById('show-video-button');
    const overlayVideo = document.getElementById('overlay-video');
    const closeVideoButton = document.getElementById('close-button');
    const videoIframe = document.getElementById('video-iframe');
    const movieKey = "@ViewBag.MovieKey";

    // Add click event listener to the show video button
    showVideoButton.addEventListener('click', function () {
        overlayVideo.style.display = 'flex';
        videoIframe.src = `https://www.youtube.com/embed/${movieKey}?autoplay=1`;
        closeVideoButton.style.display = 'block';
    });

    // Add click event listener to the close video button
    closeVideoButton.addEventListener('click', function () {
        overlayVideo.style.display = 'none';
        videoIframe.src = '';
        closeVideoButton.style.display = 'none';
    });
</script>
